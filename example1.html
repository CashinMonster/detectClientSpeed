<!DOCTYPE html>
<html>
<head>
    <script src="lib/require.js"></script>
    <script>
        function write(s) {
            document.getElementById("output").innerHTML = document.getElementById("output").innerHTML + s;
        }
    </script>

    <script>
        requirejs(['detectSpeed/detectSpeed'], function (detectSpeed) {
            //Console logs
            write("Starting Speed Detection\n");

            //print dots "."
            var interval = setInterval(function () {
                write(".");
            },500);

            //Callback to receive timing information
            var callback = function (timings) {
                clearInterval(interval);
                write("\nSpeedTest finished in "+ (timings.end-timings.start) +" milliseconds");
                write("\n\n\nTiming Information = \n" + JSON.stringify(timings,null,4));
            }

            ////////////////////////////
            //Kickoff detection process
            ////////////////////////////
            detectSpeed.startSpeedCheck("https://s3-us-west-1.amazonaws.com/amit.shanbhag/3g/coffee-apple-iphone-laptop.jpg", callback);
        });
    </script>

</head>
<body>
<h1>Use DetectSpeed</h1>
<pre id="output"></pre>
</body>
</html>